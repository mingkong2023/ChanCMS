import{G as V,X as D,g as J,b as O,u as U,a as f}from"./element-plus.js";import{V as z}from"./vue3-ace-editor.js";import"./ace-builds.js";import{_ as G}from"./index.js";import{r as l,e as h,w as H,aj as g,c as b,o as C,O as e,a as n,L as a,a3 as y,H as P,Q as u,u as q}from"./@vue.js";import"./dayjs.js";import"./@element-plus.js";import"./lodash-es.js";import"./@popperjs.js";import"./async-validator.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./resize-observer-polyfill.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./vue-router.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";/* empty css     */const F={class:"editor-container"},Q={class:"status-info ml-auto"},W={key:0},X={class:"editor-area"},K={class:"editor-wrapper"},Y={__name:"editor",props:{contentId:{type:[String,Number],required:!0},fileType:{type:String,default:"text",validator:p=>["html","css","js","javascript","json","text"].includes(p.toLowerCase())},content:{type:String,default:""}},emits:["save","refresh"],setup(p,{emit:j}){const s=p,m=j,r=l(s.content),d=l(s.content),i=l(!1),c=l(null),x=h(()=>({html:"HTML",css:"CSS",js:"JavaScript",javascript:"JavaScript",json:"JSON"})[s.fileType]||s.fileType.toUpperCase()),w=h(()=>({html:"html",css:"css",js:"javascript",javascript:"javascript",json:"json"})[s.fileType.toLowerCase()]||"text"),S=l({fontSize:14,tabSize:2,showLineNumbers:!0,highlightActiveLine:!0,wrap:!0,useWorker:!1,enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,showPrintMargin:!1,behavioursEnabled:!0}),E=o=>{o.selection.on("changeCursor",()=>{c.value=o.selection.getCursor()})},L=()=>{i.value=r.value!==d.value},k=()=>{i.value&&(f.info("请求保存..."),m("save",{id:s.contentId,content:r.value}))},I=()=>{f.info("请求刷新内容..."),m("refresh",s.contentId)};return H(()=>s.content,o=>{r.value!==o&&(r.value=o,d.value=o,i.value=!1)}),(o,t)=>{const N=g("DocumentAdd"),v=O,_=J,T=g("Refresh"),A=D,B=V,M=U;return C(),b("div",F,[e(M,{class:"toolbar bg-gray-800 text-white"},{default:a(()=>[e(B,{span:24,class:"flex items-center"},{default:a(()=>[e(A,null,{default:a(()=>[e(_,{type:"primary",onClick:k,disabled:!i.value,class:"save-btn"},{default:a(()=>[e(v,null,{default:a(()=>[e(N)]),_:1}),t[1]||(t[1]=y(" 保存 ",-1))]),_:1,__:[1]},8,["disabled"]),e(_,{onClick:I,class:"refresh-btn"},{default:a(()=>[e(v,null,{default:a(()=>[e(T)]),_:1}),t[2]||(t[2]=y(" 刷新 ",-1))]),_:1,__:[2]})]),_:1}),n("div",Q,[n("span",null,u(x.value),1),t[3]||(t[3]=n("span",{class:"mx-2"},"|",-1)),t[4]||(t[4]=n("span",null,"UTF-8",-1)),t[5]||(t[5]=n("span",{class:"mx-2"},"|",-1)),c.value?(C(),b("span",W," 行 "+u(c.value.row+1)+", 列 "+u(c.value.column+1),1)):P("",!0)])]),_:1})]),_:1}),n("div",X,[n("div",K,[e(q(z),{value:r.value,"onUpdate:value":t[0]||(t[0]=R=>r.value=R),lang:w.value,theme:"monokai",options:S.value,onInit:E,onChange:L,style:{height:"100%",width:"100%"}},null,8,["value","lang","options"])])])])}}},bt=G(Y,[["__scopeId","data-v-d1cc53be"]]);export{bt as default};
