import{a as m,q as x,r as C,s as U,B as $,C as D,g as N,D as T}from"./element-plus.js";import{r as q,e as F,W as M,w as O,K as R,o as h,L as l,O as a,a3 as c,a as j,P as z}from"./@vue.js";import{h as i,A as p,_ as G}from"./index.js";let ee=(r={})=>i({url:"".concat(p.BASE_API,"/base/config-type/list"),method:"get",params:r}),K=(r={})=>i({url:"".concat(p.BASE_API,"/base/config-type/create"),method:"post",data:r}),L=(r={})=>i({url:"".concat(p.BASE_API,"/base/config-type/detail"),method:"get",params:r}),W=(r={})=>i({url:"".concat(p.BASE_API,"/base/config-type/update"),method:"post",data:r}),te=(r={})=>i({url:"".concat(p.BASE_API,"/base/config-type/delete"),method:"get",params:r});const H={class:"dialog-footer"},J={__name:"dialog",props:{visible:{type:Boolean,default:!1},id:{type:Number,default:0},type_code:{type:String,default:""}},emits:["update:visible"],setup(r,{emit:A}){const u=r,b=q(null),V=A,v=F({get:()=>u.visible,set:t=>V("update:visible",t)}),o=M({form:{type_name:"",type_code:"",status:"1",remark:""}}),E=()=>{o.form={type_name:"",type_code:"",remark:""}};O(()=>u.visible,async t=>{if(t){if(u.id>0)try{const e=Number(u.id);o.form.id=e,await I(e)}catch(e){m.error(e)}}else E()});const B=async()=>{try{let t=o.form;const e=await K(t);e.code===200?(m({message:"创建成功 ^_^",type:"success"}),f()):m({message:e.msg,type:"error"})}catch(t){console.log(t)}},w=async()=>{try{let t=o.form;const e=await W(t);e.code===200?(m({message:"更新成功 ^_^",type:"success"}),f()):m({message:e.msg,type:"error"})}catch(t){console.log(t)}},I=async t=>{try{let e=await L({id:t});if(e.code==200){let{id:n,status:d,remark:_,type_code:y,type_name:g}=e.data;o.form={id:n,status:d,remark:_,type_code:y,type_name:g}}}catch(e){console.error(e)}},P=t=>{t&&t.validate(e=>{if(e)o.form.id>0?w():B();else return console.log("error submit!!"),!1})},f=()=>{V("update:visible",!1),E()};return(t,e)=>{const n=U,d=C,_=D,y=$,g=x,k=N,S=T;return h(),R(S,{modelValue:v.value,"onUpdate:modelValue":e[5]||(e[5]=s=>v.value=s),title:"配置",onClose:f},{footer:l(()=>[j("span",H,[a(k,{onClick:z(f,["stop"])},{default:l(()=>e[8]||(e[8]=[c("取消",-1)])),_:1,__:[8]}),a(k,{type:"primary",onClick:e[4]||(e[4]=s=>P(b.value))},{default:l(()=>e[9]||(e[9]=[c("确定",-1)])),_:1,__:[9]})])]),default:l(()=>[a(g,{model:o.form,ref_key:"formRef",ref:b,"label-width":"84px"},{default:l(()=>[a(d,{label:"类型名称",prop:"type_name"},{default:l(()=>[a(n,{modelValue:o.form.type_name,"onUpdate:modelValue":e[0]||(e[0]=s=>o.form.type_name=s),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),a(d,{label:"类型标识",prop:"type_code"},{default:l(()=>[a(n,{modelValue:o.form.type_code,"onUpdate:modelValue":e[1]||(e[1]=s=>o.form.type_code=s),placeholder:"例：qiniu.oss"},null,8,["modelValue"])]),_:1}),a(d,{label:"状态"},{default:l(()=>[a(y,{modelValue:o.form.status,"onUpdate:modelValue":e[2]||(e[2]=s=>o.form.status=s)},{default:l(()=>[a(_,{label:"显示",value:"1"},{default:l(()=>e[6]||(e[6]=[c("正常",-1)])),_:1,__:[6]}),a(_,{label:"隐藏",value:"2"},{default:l(()=>e[7]||(e[7]=[c("停用",-1)])),_:1,__:[7]})]),_:1},8,["modelValue"])]),_:1}),a(d,{label:"备注",prop:"remark"},{default:l(()=>[a(n,{type:"textarea",modelValue:o.form.remark,"onUpdate:modelValue":e[3]||(e[3]=s=>o.form.remark=s),placeholder:"例：qiniu.oss"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}},Q=G(J,[["__scopeId","data-v-748aa485"]]),oe=Object.freeze(Object.defineProperty({__proto__:null,default:Q},Symbol.toStringTag,{value:"Module"}));export{Q as D,oe as d,ee as l,te as r};
