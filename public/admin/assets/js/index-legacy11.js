System.register(["./element-plus-legacy.js","./vue-router-legacy.js","./@element-plus-legacy.js","./collect-legacy.js","./article-legacy.js","./index-legacy.js","./@vue-legacy.js","./dayjs-legacy.js","./ace-builds-legacy.js","./lodash-es-legacy.js","./@popperjs-legacy.js","./async-validator-legacy.js","./@ctrl-legacy.js","./memoize-one-legacy.js","./normalize-wheel-es-legacy.js","./pinia-legacy.js","./pinia-plugin-persist-legacy.js","./axios-legacy.js","./js-cookie-legacy.js","./nprogress-legacy.js","./saduo-legacy.js"],function(e,t){"use strict";var a,l,s,c,n,o,r,i,u,d,g,p,y,f,j,m,h,v,_,w,k,b,C,x,T,S;return{setters:[e=>{a=e.g,l=e.u,s=e.v,c=e.x,n=e.y,o=e.a},e=>{r=e.u},e=>{i=e.H,u=e.F,d=e.J},e=>{g=e.l,p=e.b,y=e.a},e=>{f=e.c},e=>{j=e.f},e=>{m=e.r,h=e.W,v=e.n,_=e.aj,w=e.c,k=e.o,b=e.O,C=e.L,x=e.a3,T=e.Q,S=e.u},null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){const t={class:"bg-fff radius-6 pd-20"};e("default",{__name:"index",setup(e){const A=r(),D=m(null),z=m([]),I=m([]),F=m(0),P=m(1),U=m(0),$=h({cid:0,title:"",shortTitle:"",tagId:"",attr:[],source:"",author:"",description:"",img:"",createdAt:new Date,updatedAt:new Date,content:"欢迎使用ChanCMS系统",status:"0",pv:1,link:""}),B=async()=>{try{const e=await g(P.value);200===e.code&&(z.value=[...e.data.list],F.value=e.data.count)}catch(e){console.log(e)}},G=e=>{P.value=e,g()},H=e=>{I.value=e},J=async e=>{try{const{pages:t,titleTag:a,articleTag:l,parseData:s,charset:c,cid:n,status:o}=e,r=t.split(","),i=await y({taskUrl:r[U.value],titleTag:a,articleTag:l,parseData:s,charset:c});if(200===i.code){const{title:e,article:t}=i.data;$.title=e,$.content=t,$.cid=n,$.status=1===o?1:0,L($)}}catch(t){console.log(t)}},L=async e=>{try{const t={...$};t.attr=t.attr.toString(),t.tagId=t.tagId.toString(),!t.description&&t.content&&(t.description=j(t.content).substr(0,255));const a=await f({defaultParams:t,fieldParams:{}});200===a.code?(o({message:`第${U.value+1}条数据完成^_^`,type:"success"}),setTimeout(()=>{const{pages:t}=e,a=t.split(",");U.value<=a.length-1&&(J(e),U.value=U.value+1)},3e3)):o({message:a.msg||`第${U.value+1}条数据失败^_^`,type:"error"})}catch(t){console.log(t)}};return v(()=>{B()}),(e,r)=>{const g=a,y=_("router-link"),f=l,j=s,m=c,h=n;return k(),w("div",t,[b(f,{type:"flex",justify:"end"},{default:C(()=>[b(y,{to:"/collect/add"},{default:C(()=>[b(g,{type:"primary",round:""},{default:C(()=>r[0]||(r[0]=[x("新增",-1)])),_:1,__:[0]})]),_:1})]),_:1}),b(m,{ref_key:"multipleTable",ref:D,data:z.value,"tooltip-effect":"dark","row-key":"id",onSelectionChange:H},{default:C(()=>[b(j,{type:"selection"}),b(j,{prop:"id",width:"60",label:"编号"}),b(j,{prop:"taskName",label:"任务名称"}),b(j,{prop:"category",label:"所属栏目"}),b(j,{prop:"charset",label:"编码"},{default:C(e=>[x(T(1===e.row.charset?"UTF-8":"GB2312"),1)]),_:1}),b(j,{prop:"status",label:"状态"},{default:C(e=>[x(T(1===e.row.status?"草稿":"发布"),1)]),_:1}),b(j,{prop:"updatedAt",label:"发布时间"},{default:C(e=>[x(T(e.row.updatedAt),1)]),_:1}),b(j,{fixed:"right",width:"222",label:"操作"},{default:C(e=>[b(g,{icon:S(i),circle:"",onClick:t=>(e=>{const t=e.id;A.push({name:"collect-edit",params:{id:t}})})(e.row)},null,8,["icon","onClick"]),b(g,{icon:S(u),circle:"",onClick:t=>(async e=>{const t=e.id;try{const e=await p(t);200===e.code?(o({message:"删除成功 ^_^",type:"success"}),B()):o({message:e.msg,type:"error"})}catch(a){console.log(a)}})(e.row)},null,8,["icon","onClick"]),b(g,{type:"primary",round:"",icon:S(d),onClick:t=>J(e.row)},{default:C(()=>r[1]||(r[1]=[x("执行",-1)])),_:2,__:[1]},1032,["icon","onClick"])]),_:1})]),_:1},8,["data"]),b(f,{type:"flex",class:"mt-20 align-c",justify:"center"},{default:C(()=>[b(h,{background:"",layout:"prev, pager, next",onCurrentChange:G,"page-size":10,total:F.value,"hide-on-single-page":""},null,8,["total"])]),_:1})])}}})}}});
