import{I,r as U,s as N,B as F,C as M,g as q,q as L,a as f}from"./element-plus.js";import{u as S}from"./vue-router.js";import{c as T}from"./frag.js";import{t as j,_ as D}from"./tinymce.js";import{_ as G}from"./index.js";import{r as g,W as i,n as H,c as K,o as n,T as O,K as u,L as a,a as W,O as o,H as y,a3 as d}from"./@vue.js";import"./dayjs.js";import"./ace-builds.js";import"./@element-plus.js";import"./lodash-es.js";import"./@popperjs.js";import"./async-validator.js";import"./@ctrl.js";import"./memoize-one.js";import"./normalize-wheel-es.js";import"./pinia.js";import"./pinia-plugin-persist.js";import"./axios.js";import"./js-cookie.js";import"./nprogress.js";/* empty css     */const $={class:"bg-fff pd-20 radius-6"},z={__name:"add",setup(A){const V=S(),c=g(null),b=i(j),m=g(!0),t=i({type:1,name:"",mark:"",content:"欢迎使用ChanCMS系统"}),v=i({name:[{required:!0,message:"请输入栏目名称",trigger:"blur"},{min:2,max:50,message:"名称长度在 2 到 50 个字符之间",trigger:"blur"}]});H(async()=>{m.value=!1});const k=()=>{m.value=!1},x=async()=>{try{const r=await T(t);r.code===200?(f({message:"新增成功^_^",type:"success"}),V.go(-1)):f({message:r.msg,type:"error"})}catch(r){console.log(r)}},E=()=>{c.value.validate(r=>{if(r)x();else return console.log("error submit!!"),!1})};return(r,e)=>{const p=N,s=U,_=M,B=F,C=q,R=L,w=I;return n(),K("div",$,[O((n(),u(R,{ref_key:"formRef",ref:c,model:t,rules:v,"label-width":"84px",class:"mt-20"},{default:a(()=>[W("div",null,[o(s,{label:"碎片名称",prop:"name"},{default:a(()=>[o(p,{modelValue:t.name,"onUpdate:modelValue":e[0]||(e[0]=l=>t.name=l),placeholder:"请输入汉字"},null,8,["modelValue"])]),_:1}),o(s,{label:"碎片标识",prop:"mark"},{default:a(()=>[o(p,{modelValue:t.mark,"onUpdate:modelValue":e[1]||(e[1]=l=>t.mark=l),placeholder:"模板使用标识"},null,8,["modelValue"])]),_:1}),o(s,{label:"碎片类型",prop:"type"},{default:a(()=>[o(B,{modelValue:t.type,"onUpdate:modelValue":e[2]||(e[2]=l=>t.type=l),class:"ml-4"},{default:a(()=>[o(_,{label:1},{default:a(()=>e[5]||(e[5]=[d("富文本",-1)])),_:1,__:[5]}),o(_,{label:2},{default:a(()=>e[6]||(e[6]=[d("文本框",-1)])),_:1,__:[6]})]),_:1},8,["modelValue"])]),_:1}),t.type===1?(n(),u(s,{key:0,label:"碎片内容"},{default:a(()=>[o(D,{modelValue:t.content,"onUpdate:modelValue":e[3]||(e[3]=l=>t.content=l),setting:b,onInit:k,"script-src":"/public/admin/tinymce/tinymce.min.js"},null,8,["modelValue","setting"])]),_:1})):y("",!0),t.type===2?(n(),u(s,{key:1,label:"碎片内容"},{default:a(()=>[o(p,{type:"textarea",prop:"textarea",class:"textarea",rows:3,modelValue:t.content,"onUpdate:modelValue":e[4]||(e[4]=l=>t.content=l)},null,8,["modelValue"])]),_:1})):y("",!0)]),o(s,null,{default:a(()=>[o(C,{type:"primary",onClick:E},{default:a(()=>e[7]||(e[7]=[d("保存",-1)])),_:1,__:[7]})]),_:1})]),_:1},8,["model","rules"])),[[w,m.value]])])}}},_e=G(z,[["__scopeId","data-v-df2ec73a"]]);export{_e as default};
